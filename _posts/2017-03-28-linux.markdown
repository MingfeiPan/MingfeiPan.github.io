---
layout: post
title: Your daily dose of linux(14)
category: linux
tag : linux
---
<img src="/img/in-post/linux.jpg">

### top  

top命令是Linux下常用的性能分析工具, 能够实时显示系统中各个进程的资源占用状况, 包括进程ID、内存占用率、CPU占用率  

linux中的进程  
<img src="/img/in-post/process.png">  


例一:显示进程信息  
*top*  

<img src="/img/in-post/top.png">  

前五行是当前系统情况整体的统计信息区:  
>第一行, 任务队列信息, 同uptime命令的执行结果  
>10:50:59 当前时间  
>up 16days 4:26 系统已经连续运行了16天多  
>1 users 当前一个用户登录系统  
>load average 0.00 0.01 0.05, 三个数分别是1分钟、5分钟、15分钟的负载情况  
`load average数据是每隔5秒钟检查一次活跃的进程数, 然后算出的数值, 如果这个数除以逻辑CPU的数量, 结果高于5的时候就表明系统在超负荷运转`  

>第二行, Tasks 进程, 系统现在一共有10个进程, 1个在运行 9个在休眠, stoped状态的有0个, zombie状态的有0个  

>第三行, CPU状态  
>0.0%us, 用户空间占用CPU的百分比    
>0.0%sy, 内核空间占用CPU的百分比  
>0.0%ni, 改变过优先级的进程占用CPU的百分比  
>100.0%id, 空闲CPU百分比  
>0.0%wa, IO等待占用CPU的百分比  
>0.0%hi, 硬中断占用CPU的百分比  
>0.0%si, 软中断占用CPU的百分比  

>第四行, 内存状态 分别为 物理内存总量, 使用中的内存总量, 空闲内存总量, 缓存的内存量  

>第五行, swap交换分区信息 分别为 交换区总量, 使用的交换区总量, 空闲交换区总量, 缓冲的交换区总量  

>第六行, 各进程的状态监控  
>PID, 进程id  
>USER, 进程所有者  
>PR, 进程优先级  
>NI, nice值 负值表示高优先级 正值表示低优先级  
>VIRT, 进程使用的虚拟内存总量 单位kb VIRT=SWAP+RES  
>RES, 进程使用的 未被换出的物理内存大小 单位kb RES=CODE+DATA    
>SHR, 共享内存大小, 单位kb  
>S, 进程状态 D=不可中断的睡眠状态 R=运行 S=睡眠 T=跟踪/停止 Z=僵尸进程  
>%CPU, 上次更新到现在的CPU时间占用百分比    
>%MEM, 进程使用的物理内存百分比  
>TIME+, 进程使用的CPU时间总计 单位1/100秒  
>COMMAND, 进程名称  

例二:多核CPU监控  
*在top基本视图中, 按键盘数字“1”, 可监控每个逻辑CPU的状况*  

例三:高亮显示当前运行进程  
*b（打开/关闭加亮效果*  

例四:进程字段排序  
*默认进入top时, 各进程是按照CPU的占用量来排序, x可以打开/关闭排序列的加亮效果*  

例五:显示完整命令  
*top -c*  

例六:设置更新周期  
*top -d 3*  

例七:显示指定的进程信息  
*top -p 574*  

top交互命令:  
>h 显示帮助画面, 给出一些简短的命令总结说明  
>k 终止一个进程  
>i 忽略闲置和僵死进程, 这是一个开关式命令  
>q 退出程序  
>r 重新安排一个进程的优先级别  
>f或者F 从当前显示中添加或者删除项目  
>m 切换显示内存信息  
>l 切换显示平均负载和启动时间信息  
>t 切换显示进程和CPU状态信息  
>c 切换显示命令名称和完整命令行  
>M 根据驻留内存大小进行排序  
>P 根据CPU使用百分比大小进行排序  
>T 根据时间/累计时间进行排序  





